---
sidebar: sidebar 
permalink: docs/task_mnode_manage_storage_cluster_assets.html 
summary: REST API UI を使用して、管理ノードのストレージクラスタアセットを追加、削除、および変更できます。 
keywords: netapp, mnode, management node, rest api, hci, assets 
---
= ストレージクラスタアセットを作成および管理する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
新しいストレージクラスタアセットを管理ノードに追加したり、既知のストレージクラスタアセット用に格納されているクレデンシャルを編集したり、 REST API を使用して管理ノードからストレージクラスタアセットを削除したりできます。

.必要なもの
* ストレージクラスタで NetApp Element ソフトウェア 11.3 以降を実行していることを確認します。
* バージョン 11.3 以降を実行する管理ノードを導入しておきます。


次のいずれかのオプションを選択します。

*  the installation ID and cluster ID of a storage cluster asset
*  a new storage cluster asset
*  the stored credentials for a storage cluster asset
*  a storage cluster asset




== ストレージのインストール ID とクラスタ ID を取得します クラスタアセット

REST API のインストール ID およびストレージクラスタの ID を取得できます。インストール ID は、新しいストレージクラスタアセットを追加する場合に必要になります。クラスタ ID は、特定のストレージクラスタアセットを変更または削除する場合に必要になります。

.手順
. 管理ノードの IP アドレスに続けて「 /inventory/1/` 」を入力して、インベントリサービスの REST API UI にアクセスします。
+
[listing]
----
https://<ManagementNodeIP>/inventory/1/
----
. [* Authorize * （認証） ] または任意のロックアイコンをクリックして、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアント ID を「 m node-client 」として入力します。
.. セッションを開始するには、 * Authorize * をクリックします。
.. ウィンドウを閉じます。


. [*Get/Installations] をクリックします。
. [* 試してみてください * ] をクリックします。
. [* Execute] をクリックします。
+
API は、既知のすべてのインストールのリストを返します。

. コード 200 の応答本文から ' インストールのリストにある 'id' フィールドに値を保存しますこれはインストール ID です。例：
+
[listing, subs="+quotes"]
----
"installations": [
    {
      *"id": "1234a678-12ab-35dc-7b4a-1234a5b6a7ba",*
      "name": "my-hci-installation",
      "_links": {
        "collection": "https://localhost/inventory/1/installations",
        "self": "https://localhost/inventory/1/installations/1234a678-12ab-35dc-7b4a-1234a5b6a7ba"
      }
    }
  ]
----
. 管理ノードの IP アドレスに続けて「 /storage/1/` 」を入力して、ストレージサービスの REST API UI にアクセスします。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. [* Authorize * （認証） ] または任意のロックアイコンをクリックして、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアント ID を「 m node-client 」として入力します。
.. セッションを開始するには、 * Authorize * をクリックします。
.. ウィンドウを閉じます。


. [*get/clusters] をクリックします。
. [* 試してみてください * ] をクリックします。
. 前の手順で保存したインストール ID を 'installationId' パラメータに入力します
. [* Execute] をクリックします。
+
API は、このインストール環境内のすべての既知のストレージクラスタのリストを返します。

. コード 200 の応答本文から、正しいストレージクラスタを探して、クラスタの「 torageId 」フィールドに値を保存します。これはストレージクラスタの ID です。




== 新しいストレージクラスタアセットを追加します

REST API を使用して、管理ノードインベントリに新しいストレージクラスタアセットを追加できます。新しいストレージクラスタアセットを追加すると、そのアセットが管理ノードに自動的に登録されます。

.必要なもの
* をコピーしました  the installation ID and cluster ID of a storage cluster asset,ストレージクラスタ ID とインストール ID をクリックします。
* 複数のストレージノードを追加する場合は、の制限を確認しておく必要があります link:concept_hci_clusters.html#authoritative-storage-clusters["権限のあるクラスタです"] 複数のストレージクラスタをサポート
+

NOTE: 信頼できるクラスタで定義されたすべてのユーザが、 Hybrid Cloud Control インスタンスに関連付けられている他のすべてのクラスタのユーザとして定義されています。



.手順
. 管理ノードの IP アドレスに続けて「 /storage/1/` 」を入力して、ストレージサービスの REST API UI にアクセスします。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. [* Authorize * （認証） ] または任意のロックアイコンをクリックして、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアント ID を「 m node-client 」として入力します。
.. セッションを開始するには、 * Authorize * をクリックします。
.. ウィンドウを閉じます。


. [* POST/clusters] をクリックします。
. [* 試してみてください * ] をクリックします。
. 「 Request body 」フィールドに、次のパラメータで新しいストレージクラスタの情報を入力します。
+
[listing]
----
{
  "installationId": "a1b2c34d-e56f-1a2b-c123-1ab2cd345d6e",
  "mvip": "10.0.0.1",
  "password": "admin",
  "userId": "admin"
}
----
+
|===
| パラメータ | を入力します | 説明 


| 'installationId' | 文字列 | 新しいストレージクラスタを追加するインストール。以前に保存したインストール ID をこのパラメータに入力します。 


| 「 MVIP 」 | 文字列 | ストレージクラスタの IPv4 管理仮想 IP アドレス（ MVIP ）。 


| 「 password 」と入力します | 文字列 | ストレージクラスタとの通信に使用するパスワード。 


| 「 userid` 」 | 文字列 | ストレージクラスタとの通信に使用するユーザ ID （ユーザには管理者権限が必要）。 
|===
. [* Execute] をクリックします。
+
API は、新しく追加したストレージクラスタアセットの名前、バージョン、 IP アドレスなどの情報を含むオブジェクトを返します。





== ストレージクラスタアセットに保存されているクレデンシャルを編集します

管理ノードがストレージクラスタへのログインに使用する、保存されているクレデンシャルを編集できます。選択するユーザにはクラスタ管理者アクセスが必要です。


NOTE: の手順に従っていることを確認します  the installation ID and cluster ID of a storage cluster asset 続行する前に。

.手順
. 管理ノードの IP アドレスに続けて「 /storage/1/` 」を入力して、ストレージサービスの REST API UI にアクセスします。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. [* Authorize * （認証） ] または任意のロックアイコンをクリックして、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアント ID を「 m node-client 」として入力します。
.. セッションを開始するには、 * Authorize * をクリックします。
.. ウィンドウを閉じます。


. * PUT / clusters/｛ storageId ｝ * をクリックします。
. [* 試してみてください * ] をクリックします。
. 以前にコピーしたストレージクラスタ ID を「 torageId 」パラメータに貼り付けます。
. [*Request body*] フィールドで、次のパラメータの一方または両方を変更します。
+
[listing]
----
{
  "password": "adminadmin",
  "userId": "admin"
}
----
+
|===
| パラメータ | を入力します | 説明 


| 「 password 」と入力します | 文字列 | ストレージクラスタとの通信に使用するパスワード。 


| 「 userid` 」 | 文字列 | ストレージクラスタとの通信に使用するユーザ ID （ユーザには管理者権限が必要）。 
|===
. [* Execute] をクリックします。




== ストレージクラスタアセットを削除します

ストレージクラスタが使用停止になっている場合は、ストレージクラスタアセットを削除できます。ストレージクラスタのアセットを削除すると、管理ノードから自動的に登録解除されます。


NOTE: の手順に従っていることを確認します  the installation ID and cluster ID of a storage cluster asset 続行する前に。

.手順
. 管理ノードの IP アドレスに続けて「 /storage/1/` 」を入力して、ストレージサービスの REST API UI にアクセスします。
+
[listing]
----
https://<ManagementNodeIP>/storage/1/
----
. [* Authorize * （認証） ] または任意のロックアイコンをクリックして、次の手順を実行します。
+
.. クラスタのユーザ名とパスワードを入力します。
.. クライアント ID を「 m node-client 」として入力します。
.. セッションを開始するには、 * Authorize * をクリックします。
.. ウィンドウを閉じます。


. 削除 / クラスタ / ｛ storageId ｝ * をクリックします。
. [* 試してみてください * ] をクリックします。
. 「 torageId 」パラメータに、前の手順でコピーしたストレージクラスタ ID を入力します。
. [* Execute] をクリックします。
+
成功すると、 API は空の応答を返します。



[discrete]
== 詳細については、こちらをご覧ください

* link:concept_hci_clusters.html#authoritative-storage-clusters["権限のあるクラスタです"]
* https://docs.netapp.com/us-en/vcp/index.html["vCenter Server 向け NetApp Element プラグイン"^]
* https://www.netapp.com/hybrid-cloud/hci-documentation/["NetApp HCI のリソースページ"^]

